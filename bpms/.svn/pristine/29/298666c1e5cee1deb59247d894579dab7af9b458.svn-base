<%--
* [[개정이력(Modification Information)]]
* 수정일          수정자        수정내용
* ------------   ---------  -----------------
* 2021. 2. 19.     신광진      최초작성
* Copyright (c) 2021 by DDIT All right reserved
 --%>

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<div class="dashboard-header">
    <div class="project-name">
        관리자 대시보드
    </div>
</div>

<div class="customdash-container">
    
    <ul class="customdashboard-card">
        <li class="customcard-item custom-d-flex-2-4">
            <span class="customcard-header">
                총 일감
            </span>
            <span class="customcard-statistics">
                <span class="customstatistics-number">
                    189
                </span>
            </span>
        </li>
        <li class="customcard-item custom-d-flex-2-4">
            <span class="customcard-header">
                총 이슈
            </span>
            <span class="customcard-statistics">
                <span class="customstatistics-number">
                    189
                </span>
            </span>
        </li>
        <li class="customcard-item custom-d-flex-2-4">
            <span class="customcard-header">
                완료작업
            </span>
            <span class="customcard-statistics">
                <span class="customstatistics-number">
                    189
                </span>
            </span>
        </li>
        <li class="customcard-item custom-d-flex-2-4">
            <span class="customcard-header">
                프로젝트 개수
            </span>
            <span class="customcard-statistics">
                <span class="customstatistics-number">
                    189
                </span>
            </span>
        </li>
        <li class="customcard-item custom-d-flex-2-4">
            <span class="customcard-header">
                진행중인 프로젝트
            </span>
            <span class="customcard-statistics">
                <span class="customstatistics-number">
                    189
                </span>
            </span>
        </li>
    </ul>

    <ul class="customchart-statistics">
        <li class="customchart-item custom-d-flex-4">
            <div class="customchart-header">
                <span class="customchart-title">
                    일감 상태별 차트
                </span>
            </div>
            <div class="chart-container">
                <canvas id="workStatusChart"></canvas>
            </div>
        </li>
        <li class="customchart-item custom-d-flex-4">
            <div class="customchart-header">
                <span class="customchart-title">
                    이슈 상태별 차트
                </span>
            </div>
            <div class="chart-container">
                <canvas id="issueStatusChart"></canvas>
            </div>
        </li>
        <li class="customchart-item custom-d-flex-4">
            <div class="customchart-header">
                <span class="customchart-title">
                    프로젝트 상태별 차트
                </span>
            </div>
            <div class="chart-container">
                <canvas id="projectStatusChart"></canvas>
            </div>
        </li>
    </ul>

    <ul class="customlist-item">
        <li class="customcurrent-chart custom-d-flex-6">
            <div class="customchart-header">
                <span class="customchart-title">
                    구성원 권한별 차트
                </span>
                <div class="chart-container">
                    <canvas id="memberStatusChart"></canvas>
                </div>
            </div>
        </li>
        <li class="customcurrent-chart custom-d-flex-6">
            <div class="customchart-header">
                <span class="customchart-title">
                    프로젝트 역할별 차트
                </span>
                <div class="chart-container">
                    <canvas id="projectRoleStatusChart"></canvas>
                </div>
            </div>
        </li>
    </ul>
</div>


<script>

	$(function(){
	
	const workStatusChart = document.getElementById("workStatusChart").getContext('2d');
	const issueStatusChart =  document.getElementById("issueStatusChart").getContext('2d');
	const projectStatusChart =  document.getElementById("projectStatusChart").getContext('2d');
	const memberStatusChart =  document.getElementById("memberStatusChart").getContext('2d');
	const projectRoleStatusChart =  document.getElementById("projectRoleStatusChart").getContext('2d');
	let colorSequnce = 0;
	// 컬러 색상 30가지
	let color = ["#ff7a7a", "#7abaff", "#ffef7a", "#ffaf7a", "#ce7aff", "#ff7a9d", "#6932ff", "#32ff87", "#03e9bf", "#f8ffba",
	             "#ffc5c5", "#576ebd", "#bdae57", "#f89f63", "#f532ff", "#fd5381", "#400bff", "#13ba6c", "#138dba", "#b7ba13",
	             "#fc2525", "#2647b5", "#e1fa04", "#fa6604", "#fa04a8", "#b82b89", "#4200dc", "#b1f7d6", "#036d94", "#6a490d"]
	
	renderChart(color);
	
	function renderChart() {
	
		let workChart = new Chart(workStatusChart, {
			type: 'pie',
		    data: {
		        labels: [
			        '완료',
			        '진행',
			        '새기능'
		        ],
		        datasets: [{
		        	label: 'My First Dataset',
		        	data: [300, 50, 100],
			        backgroundColor: [
			            color[0],
			            color[1],
			            color[2],
			        ],
		        	hoverOffset: 4
		        }]
		    }
		});
		
		let issuechart = new Chart(issueStatusChart, {
		    type: 'pie',
		    data: {
		        labels: [
		        '완료',
		        '진행',
		        '새기능'
		        ],
		        datasets: [{
		        label: 'My First Dataset',
		        data: [300, 50, 100],
		        backgroundColor: [
		            color[0],
		            color[1],
		            color[2],
		        ],
		        hoverOffset: 4
		        }]
		    }
		});
		
		let projectchart = new Chart(projectStatusChart, {
		    type: 'bar',
		    data: {
		        labels: [
			        '완료',
			        '진행',
			        '새기능'
		        ],
		        datasets: [{
			        data: [300, 150, 130],
			        backgroundColor: [
			            color[0],
			            color[1],
			            color[2],
			        ],
					borderWidth : 2, // 막대 테두리 너비
			        hoverOffset: 4
		        }]
		    },
		    options: {
		        legend: {
		            display: false
		        },
		        responsive: false,
		        scales: {
		            yAxes: [{
		                ticks: {
		                    min: 0
		                }
		            }]
		        }
		    }
		});
		
		let memberchart = new Chart(memberStatusChart, {
		    type: 'horizontalBar',
		    data: {
		        labels: [
			        '완료',
			        '진행',
			        '새기능'
		        ],
		        datasets: [{
			        data: [300, 150, 130],
			        backgroundColor: [
			            color[0],
			            color[1],
			            color[2],
			        ],
					borderWidth : 2, // 막대 테두리 너비
	            	hoverOffset: 4
		        }]
		    },
		    options: {
		        legend: {
		            display: false
		        },
		        responsive: false,
		        scales: {
		            xAxes: [{
		                ticks: {
		                    min: 0
		                }
		            }]
		        }
		    }
		});
		
		let rolechart = new Chart(projectRoleStatusChart, {
		    type: 'bar',
		    data: {
		        labels: [
			        '완료',
			        '진행',
			        '새기능',
			        'UA',
			        'PA'
		        ],
		        datasets: [{
			        data: [300, 150, 130, 120, 50],
			        backgroundColor: [
			            color[1],
			            color[2],
			            color[3],
			            color[4],
			            color[5],
			        ],
					borderWidth : 2, // 막대 테두리 너비
	            	hoverOffset: 4
				}]
			},
		    options: {
		        legend: {
		            display: false
		        },
		        responsive: false,
		        scales: {
		            yAxes: [{
		                ticks: {
		                    min: 0
		                }
		            }]
		        }
		    }
		});
      }
  })

  
  function getColor() {
      let color = Math.random() * 100;  // 0~ffffff 사이의 랜덤 색 만들기 결과는 10진수 실수
      color = parseInt(color); // 실수를 정수로 형변환
      color = color.toString(16); // 정수를 16진수 문자로 
      let colorCode = "#" + color; // 색상 코드로 변경

      return colorCode;
  }

</script>