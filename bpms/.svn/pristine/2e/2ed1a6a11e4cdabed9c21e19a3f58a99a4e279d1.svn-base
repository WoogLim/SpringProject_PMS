<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style type="text/css">
	.divBtn, th{
		text-align: center; 
		margin: 30px;
	}
</style>
</head>
<body>
<div class="panel-header">
	<div class="page-inner">
		<span class="project-path">
			<a href="">프로젝트</a>/
			<a href="">PMS 프로그램 개발</a>
		</span>
   
		<div class="issue-header clearfix">
			<div class="float-left">
				<h1 class="fw-mediumbold">공지사항 상세보기</h1>
			</div>
			
			<button class="btn btn-success float-right d-flex" id="listBtn" onclick="location.href='${cPath}/proNotice/proNoticeList.do?proId=${param.proId }'">
            	<i class="fas fa-list">
	            	목록
            	</i>
			</button>
		</div>
		<table class="table table-hover">
			<tr>
				<th class="text">제목</th>
				<td class="pb-1">${pronotice.boardTitle }</td>
			</tr>
			<tr>
				<th class="text">작성자</th>
				<td class="pb-1">${pronotice.boardWriter }</td>
			</tr>
			<tr>
				<th class="text">작성일자</th>
				<td class="pb-1">${pronotice.createDate }</td>
			</tr>
			<tr>
				<th class="text">수정일자</th>
				<td class="pb-1">${pronotice.modifyDate }</td>
			</tr>
			<tr>
				<th class="text">첨부파일</th>
				<td class="pb-1">
					<c:if test="${not empty pronotice.attatchList }">
						<c:forEach items="${pronotice.attatchList }" var="attatch" varStatus="vs">
							<c:url value="/board/download.do" var="downloadURL">
								<c:param name="attNo" value="${attatch.attNo }" />
							</c:url>
							<a href="${downloadURL }">
								<span title="다운로드:${attatch.attDowncount}">${attatch.attOriginname }</span>
								${not vs.last?"|":"" }
							</a>
						</c:forEach>		
					</c:if>
				</td>
			</tr>
			<tr>
				<th class="text">내용</th>
				<td class="pb-1">${pronotice.boardContent }</td>
			</tr>
		</table>
		<div class=divBtn>
			<input type="button" class="btn btn-primary" id="updateBtn" value="수정" />
			<input type="button" class="btn btn-danger" id="deleteBtn" value="삭제" />
		</div>
	</div>
</div>
<form id="updateForm" method="get" action="${cPath }/proNotice/updateNotice.do">
	<input type="hidden" name="boardNo" value="${pronotice.boardNo }">
	<input type="hidden" name="proId" value="${param.proId }">
</form>
<form id="deleteForm" method="post" action="${cPath}/proNotice/deleteNotice.do">
	<input type="hidden" name="boardNo" value="${pronotice.boardNo }">
	<input type="hidden" name="proId" value="${param.proId }">
</form>
<script type="text/javascript">
	let updateForm = $("#updateForm");
	let updateBtn = $("#updateBtn").on("click", function(){
		updateForm.submit();
	});
	let deleteForm = $("#deleteForm");
	let deleteBtn = $("#deleteBtn").on("click", function(){
		deleteForm.submit();
	});
</script>
</body>
</html>