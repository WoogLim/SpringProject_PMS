package kr.or.ddit.projects.history.service.impl;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.List;

import org.apache.commons.lang3.StringUtils;
import org.springframework.stereotype.Service;

import kr.or.ddit.projects.base.service.BaseService;
import kr.or.ddit.projects.history.service.AdminHistoryService;
import kr.or.ddit.projects.history.vo.HistoryVO;
import kr.or.ddit.vo.SortVO;


/**
 * @author 신광진
 * @since 2021. 2. 13.
 * @version 1.0
 * @see javax.servlet.http.HttpServlet
 * <pre>
 * [[개정이력(Modification Information)]]
 * 수정일       	수정자           수정내용
 * ------------    --------    ----------------------
 * 2021. 2. 13.     신광진           최초작성
 * Copyright (c) 2021 by DDIT All right reserved
 * </pre>
 */
@Service
public class AdminHistoryServiceImpl extends BaseService implements AdminHistoryService {

	@Override
	public List<HistoryVO> retrieveHistoryList(SortVO sortVO) {
		if(StringUtils.isBlank(sortVO.getStartDate())) {
			Calendar cal = Calendar.getInstance();
			cal.setTime(new Date());
			SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
			
			sortVO.setEndDate(sdf.format(cal.getTime()));

			cal.add(Calendar.DATE, -7);
			sortVO.setStartDate(sdf.format(cal.getTime()));
		}
		return adminHistoryDAO.selectHistoryList(sortVO);
	}

}
