<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ taglib prefix="security" uri="http://www.springframework.org/security/tags"%>
<security:authorize access="isAuthenticated()">
	<security:authentication property="principal" var="principal" />
	<c:set var="authMember" value="${principal.realMember }" />
<table class="table table-hover">
	<tr>
		<th class="text-center">제목</th>
		<td class="pb-1">${boardVO.boardTitle }</td>
	</tr>
	<tr>
		<th class="text-center">작성자</th>
		<td class="pb-1">${boardVO.boardWriter }</td>
	</tr>
	<tr>
		<th class="text-center">작성일</th>
		<td class="pb-1">${boardVO.createDate}</td>
	</tr>
	<tr>
		<th class="text-center">첨부파일</th>
		<td class="pb-1">
			<c:if test="${not empty boardVO.attatchList }">
				<c:forEach items="${boardVO.attatchList }" var="attatch" varStatus="vs">
					<c:url value="/board/download.do" var="downloadURL">
						<c:param name="attNo" value="${attatch.attNo }" />
					</c:url>
					<a href="${downloadURL }">
						<span title="다운로드:${attatch.attDowncount }">${attatch.attOriginname}</span>
						${not vs.last?"|":"" }
					</a>
				</c:forEach>		
			</c:if>
		</td>
	</tr>
	<tr>
		<th class="text-center">내용</th>
		<td class="pb-1">${boardVO.boardContent}</td>
	</tr>
	<tr>
		<td colspan="5" class="text-center">
			<c:url value="/serverNotice/serverNoticeUpdate.do" var="updateURL">
				<c:param name="boardNo" value="${boardVO.boardNo }" />
				<c:param name="proId" value="${param.proId }" />
			</c:url>
			<c:if test="${authMember.adminRole eq 'Y' }">
				<a class="btn btn-primary" href="${updateURL }">수정</a>
				<input type="button" value="삭제" class="btn btn-danger" id="removeBtn" />
			</c:if>
			<a class="btn btn-success" href="${cPath }/serverNotice/serverNoticeList.do?proId=${param.proId}">목록으로</a>
		</td>
	</tr>
</table>
<form id="deleteForm" method="post" action="${cPath }/serverNotice/serverNoticeDelete.do?proId=${param.proId}">
	<input type="hidden" name="boardNo" value="${boardVO.boardNo }" />
</form>
</security:authorize>
<script>
	let deleteForm = $("#deleteForm");
	let removeBtn = $("#removeBtn").on("click", function(){
		deleteForm.submit();
	});
</script>